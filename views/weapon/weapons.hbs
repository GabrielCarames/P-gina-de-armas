<link rel='stylesheet' href='/css/weapon.css' />
<div class="row">
  <div class="col">
    <h1 style="text-align: center;">Armas / {{actualCategory}} / {{actualPrice}}</h1>
  </div>
</div>
<div class="row">
  <div class="col-3" id="itemsPanel">
    <div class="card bg-light mb-3" style="max-width: 18rem;">
      <div class="card-header">Categorías</div>
      <div class="card-body">
        <p class="card-text">
          <a href="/weapon/">Todas las categorías</a><br>
          <a href="/weapon/weaponfilter/gun/null">Pistolas</a><br>
          <a href="/weapon/weaponfilter/assault_rifle/null">Fusiles de asalto</a><br>
          <a href="/weapon/weaponfilter/shotgun/null">Escopetas</a><br>
          <a href="/weapon/weaponfilter/sniper_rifle/null">Fusiles de francotirador</a><br>
          <a href="/weapon/weaponfilter/submachine_gun/null">Subfusiles</a></p>
      </div>
    </div>
    <div class="card bg-light mb-3" style="max-width: 18rem;">
      <div class="card-header">Precio</div>
      <div class="card-body">
        <p class="card-text">
        <a href="/weapon/weaponfilter/null/0">Todos los precios</a><br>
        <a href="/weapon/weaponfilter/null/2000">Hasta $2000</a><br>
        <a href="/weapon/weaponfilter/null/5000">Hasta $5000</a><br>
        <a href="/weapon/weaponfilter/null/10000">Hasta $10000</a><br>
        <a href="/weapon/weaponfilter/null/30000">Hasta $30000</a> <br>
        <a href="/weapon/weaponfilter/null/50000">Hasta $50000</a><br>
        <!-- <a href="/weapon/weaponprice/">Entre x y x</a>  para el rango hay que meter un campo con un boton y sacar su info del campo y paja--> 
        </p>
      </div>
    </div>
    <div class="card bg-light mb-3" style="max-width: 18rem;">
      <div class="card-header">Tipo de munición</div>
      <div class="card-body">
        <p class="card-text">Todas las municiones<br>9mm<br>7,65mm<br>a<br>a<br>a</p>
      </div>
    </div>
  </div>
  <div class="col-6">
    <div class="row" id="weaponsPanel">

      {{#each weapons}}
      <a>
        <div class="col-4">
          <div class="card justify-content-center">
            <div class="bg-image hover-overlay ripple" data-mdb-ripple-color="light">
              <img src="{{image}}" id="weaponImage" class="img-fluid" alt=" wow">
              <a href="#!">
                <div class="mask" style="background-color: rgba(251, 251, 251, 0.15)"></div>
              </a>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title"> {{name}} </h5>
                </div>
                <div class="col">
                  <h5 class="card-title" style="text-transform: lowercase"> {{condition}} </h5>
                </div>
                <div class="col">
                  <h5 class="card-title"> {{price}} </h5>
                </div>
              </div>
              <p class="card-text"> {{description}} </p>
              <a href="#!" class="btn btn-primary" style="background-color: rgba(32,60,91,255);">Añadir al carrito</a>
            </div>
            <div class="col">
              <p class="card-text"> {{category}} </p>
            </div>
          </div>
        </div>
      </a>
    {{/each}}

    </div>
  </div>
  <div class="col-3" id="carritoPanel">
    <a id="uploadweapon" href="/weapon/uploadweapon" class="btn btn-primary"
      style="vertical-align: middle;background-color: rgba(32,60,91,255);">Subir publicación de arma</a>
    <div class="card bg-light mb-3" style="max-width: 18rem;">
      <div class="card-header">Carrito</div>
      <div class="card-body">
        <p class="card-text">Glock<br>Lanzallamas<br>358 granadas<br>Lanzacohete<br>Minigun</p>
      </div>
    </div>
  </div>

</div>

<div class="row">

</div>



<script>/*
  var weaponsPanel = document.getElementById('weaponsPanel');
  $.get("http://localhost:3000/user/getweapons", data => {
    console.log(data.weapons)
    if (data.status) {
      $.each(data.weapons, function () {
        weaponsPanel.innerHTML +=
          '<a>' +
          '<div class="col-4">' +
          '<div class="card justify-content-center">' +
          '<div class="bg-image hover-overlay ripple" data-mdb-ripple-color="light">' +
          '<img src="' + this.image + '" id="weaponImage" class="img-fluid"" alt="wow">' +
          '<a href="#!">' +
          '<div class="mask" style="background-color: rgba(251, 251, 251, 0.15)"></div>' +
          '</a>' +
          '</div>' +
          '<div class="card-body">' +
          '<div class="row">' +
          '<div class="col">' +
          '<h5 class="card-title">' + this.name + '</h5>' +
          '</div>' +
          '<div class="col">' +
          '<h5 class="card-title" style="text-transform: lowercase">' + this.condition + '</h5>' +
          '</div>' +
          '</div>' +
          '<p class="card-text">' + this.description + '</p>' +
          '<a href="#!" class="btn btn-primary" style="background-color: rgba(32,60,91,255);">Añadir al carrito</a>' +
          '</div>' +
          '<div class="col">' +
          '<p class="card-text">' + this.category + '</p>' +
          '</div>' +
          '</div>' +
          '</div>' +
          '</a>'
      })
    } else {
      weaponsPanel.innerHTML += data.message
    }
  })/* todo esto esta bien, pero me esta trayendo todas las armas pertenencientes al usuario logueado, mas no todas las armas de todos los usuarios.
  estaria bien meter esto en una supuesta seccion como "mis publicaciones"
  $.get("http://localhost:3000/user/getweapons", data => {
    console.log(data.weapons)
    if (data.status) {
      $.each(data.weapons, function () {
        weaponsPanel.innerHTML +=
          '<a>' +
          '<div class="col-4">' +
          '<div class="card justify-content-center">' +
          '<div class="bg-image hover-overlay ripple" data-mdb-ripple-color="light">' +
          '<img src="' + this.image + '" id="weaponImage" class="img-fluid"" alt="wow">' +
          '<a href="#!">' +
          '<div class="mask" style="background-color: rgba(251, 251, 251, 0.15)"></div>' +
          '</a>' +
          '</div>' +
          '<div class="card-body">' +
          '<div class="row">' +
          '<div class="col">' +
          '<h5 class="card-title">' + this.name + '</h5>' +
          '</div>' +
          '<div class="col">' +
          '<h5 class="card-title" style="text-transform: lowercase">' + this.condition + '</h5>' +
          '</div>' +
          '</div>' +
          '<p class="card-text">' + this.description + '</p>' +
          '<a href="#!" class="btn btn-primary" style="background-color: rgba(32,60,91,255);">Añadir al carrito</a>' +
          '</div>' +
          '<div class="col">' +
            '<p class="card-text">' + this.category + '</p>' +
          '</div>' +
          '</div>' +
          '</div>' +
          '</a>'
      })
    } else {
      weaponsPanel.innerHTML += data.message
    }
  })*/
</script>